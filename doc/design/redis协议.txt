Redis的通讯协议可以说大集汇了……消息头标识，消息行还有就行里可能还有个数据块大小描述.首先Redis是以行来划分，每行以\r\n行结束。每一行都有一个消息头，消息头共分为5种分别如下:

(+) 表示一个正确的状态信息，具体信息是当前行+后面的字符。

(-)  表示一个错误信息，具体信息是当前行－后面的字符。

(*) 表示消息体总共有多少行，不包括当前行,*后面是具体的行数。

($) 表示下一行数据长度，不包括换行符长度\r\n,$后面则是对应的长度的数据。

(:) 表示返回一个数值，：后面是相应的数字节符。

以上就是Redis协议的基础组成部分，下面来分析几个指令了解一下具体相关指令和返回情况.

SET

SET HENRY  HENRYFAN
以上命令是设置HENRY 的值为HENRYFAN.在Redis的通讯协议上会以空格把命令拆分成三行;得到最终的命令如下：

*3\r\n
$3\r\n
SET\r\n
$5\r\n
HENRY\r\n
$8\r\n
HENRYFAN\r\n

服务端操作成功
+OK\r\n
如果出现错误服务端会返回
-错误信息\r\n


GET

GET HENRY
产生的通讯指令是：
*2\r\n
$3\r\n
GET\r\n
$5\r\n
HENRY\r\n

如果存在这个Key则返回
$8\r\n
HENRYFAN\r\n
不存在返回
$-1\r\n


HKEYS

HKEYS HENRY
以上命令是获取对应HENRY有多少个field成员

*2\r\n
$5\r\n
HKEYS\r\n
$5\r\n
HENRY\r\n

如果不存在任何字段信息
1
*0\r\n
如果存在QQ字段信息
*1\r\n
$2\r\n
QQ\r\n


HMGET
HMGET HENRY QQ
以上命令是获取HENRY的QQ信息。
*3\r\n
$5\r\n
HMGET\r\n
$5\r\n
HENRY\r\n
$2\r\n
QQ\r\n

如果不存在字段值

*1\r\n
$-1\r\n
存在字段值

*1\r\n
$8\r\n
28304340\r\n